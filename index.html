<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Happy Birthday lamoo</title>

  <!-- libs -->
  <link rel="stylesheet" href="https://unpkg.com/splitting/dist/splitting.css" />
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">

  <style>
    :root { --border-color:#6C284D; }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: #A47DAB;
      font-family: 'Dancing Script', cursive;
      overflow: hidden; /* no scroll */
    }

    /* Layout */
    .container{
      position: fixed; inset: 0;
      display: flex; flex-direction: column;
      justify-content: space-between; align-items: center;
      padding: 6vh 2vw 0; gap: 1.5vh;
    }

    /* Title */
    .headline{ display:flex; align-items:center; gap: 2vh; }
    .text{
      color:#F8DCD4;
      text-shadow: 2px 2px var(--border-color);
      font-size: clamp(2.4rem, 6.2vw, 4.6rem);
      line-height:1.05; white-space:nowrap; text-align:center;
    }
    .text .char{ animation: slide-in .9s cubic-bezier(.5,0,.5,1) both; animation-delay: calc(60ms * var(--char-index)); }
    @keyframes slide-in{ from{ transform: translateY(-1em) rotate(-.5turn) scale(.5); opacity: 0; } }

    /* Heart */
    .heartImg{
      width: clamp(72px, 10vh, 130px);
      height: auto; display: block;
      filter: drop-shadow(0 1.2vh 1.4vh rgba(0,0,0,.25));
      transition: transform .35s ease;
    }
    .heartImg:hover{ transform: translateY(-2px) scale(1.03) rotate(-1deg); }

    /* Presents group (shorter) */
    .presents{
      align-self: center;
      display:flex; justify-content:center; align-items:flex-end;
      height: min(48svh, 52vh); /* shorter group */
      gap: 1.2vh;
      padding-inline: clamp(8px, 2vw, 24px);
      width: 100%;
    }
    .present{ position:relative; display:flex; flex-direction:column; align-items:center; }
    .present.pink   { width: 34vh; height: 26vh; z-index:10; }
    .present.yellow { width: 38vh; height: 34vh; z-index: 0; cursor:pointer; }
    .present.purple { width: 31vh; height: 23vh; z-index: 1; }
    .present.pink   { margin-right: -1.2vh; }
    .present.purple { margin-left:  -1.2vh; }

    .present .lid{
      height: 20%; width: calc(100% + 1.8vh);
      border: .5vh solid var(--border-color); border-radius: 1vh;
      background:#ffa6c1;
      box-shadow: inset .2vh .2vh rgba(255,255,255,.5), .8vh 0 rgba(0,0,0,.15);
    }
    .present .box{
      width:100%; height:100%;
      background-position: 0 0, 2.6vh 2.6vh; background-size: 5.2vh 5.2vh;
      border: .5vh solid var(--border-color);
      border-top:0; border-bottom:0;
      border-bottom-left-radius: 1vh; border-bottom-right-radius: 1vh;
      box-shadow: inset -1.8vh .9vh rgba(0,0,0,.30), .8vh 0 rgba(0,0,0,.15);
    }
    .present .ribbon{
      position:absolute; top:-.5vh; width: 4.2vh; height: calc(100% - .8vh);
      border: .5vh solid var(--border-color); border-radius: 1vh;
      box-shadow: inset .2vh .2vh rgba(255,255,255,.45);
    }
    .present .ribbon::before{
      content:''; position:absolute; width:100%; height:.7vh; top:21%;
      background: rgba(0,0,0,.28);
    }
    .present .bow{
      position:absolute; top:-2.6vh; width:2.8vh; height:2.8vh;
      border: .5vh solid var(--border-color); border-radius:50%;
      box-shadow: inset .2vh .2vh rgba(255,255,255,.5), inset -.2vh -.6vh rgba(0,0,0,.3);
    }
    .present .bow::before, .present .bow::after{
      content:''; position:absolute; top:-1.4vh; width:4.4vh; height:4.4vh;
      border:.5vh solid var(--border-color); border-radius:50%;
      box-shadow: inset .2vh .2vh rgba(255,255,255,.5), inset -.2vh -.6vh rgba(0,0,0,.3);
      z-index:-1;
    }
    .present .bow::before{ left:1.9vh; }
    .present .bow::after { right:1.9vh; }

    /* Original ribbon colors */
    .present.pink .ribbon,
    .present.pink .bow,
    .present.pink .bow::before,
    .present.pink .bow::after,
    .present.purple .ribbon,
    .present.purple .bow,
    .present.purple .bow::before,
    .present.purple .bow::after { background:#ffc4d6; }

    .present.yellow .ribbon,
    .present.yellow .bow,
    .present.yellow .bow::before,
    .present.yellow .bow::after { background:#f4acb7; }

    .present.pink .box,
    .present.purple .box{
      background-color:#ffa6c1;
      background-image: radial-gradient(#ffc4d6 20%, transparent 20%),
                        radial-gradient(#ffc4d6 20%, transparent 20%);
    }
    .present.yellow .box{
      background-color:#ffa6c1;
      background-image: radial-gradient(transparent 20%, transparent 20%),
                        radial-gradient(transparent 20%, transparent 20%);
    }

    .present.pink:hover, .present.yellow:hover, .present.purple:hover{ animation: wiggle .5s; }
    @keyframes wiggle{ 0%{transform:translateZ(0)} 30%{transform:scale(1.04,.94)} 60%{transform:scale(.95,1.05)} 100%{transform:translateZ(0)} }

    /* Center CTA */
    .cta-center{
      position:absolute; left:50%; top:38%;            /* lowered for shorter box */
      transform: translate(-50%, -50%);
      background: transparent; border:0;
      color:#6C284D; font-weight:700;
      text-shadow: 2px 2px var(--border-color), 0 0 10px rgba(255,181,192,.35);
      font-family: 'Dancing Script', cursive;
      font-size: 32px; line-height:1;
      white-space: nowrap;
      padding: 0 .3em; cursor: pointer; z-index: 2;
      transition: transform .18s ease;
    }
    .cta-center:hover,.cta-center:focus-visible{
      transform: translate(-50%, -50%) scale(1.08); outline:none;
    }

    /* Card overlay */
    .card-overlay{
      position: fixed; inset: 0;
      background: rgba(0,0,0,.45);
      display: grid; place-items: center;
      z-index: 9997;
    }
    .card{
      width: min(94vw, 640px);
      background: #F8DCD4;
      border-radius: 16px;
      padding: 24px 22px 20px;
      box-shadow: 0 22px 55px rgba(0,0,0,.28);
      font-family: 'Dancing Script', cursive;
      color: #2c2c2c; position: relative;
    }
    .card__close{
      position: absolute; right: 10px; top: 8px;
      width: 38px; height: 38px; border: none; border-radius: 50%;
      background: #F8DCD4; cursor: pointer; font-size: 22px; line-height: 1;
    }
    .card__title{ margin: 0 0 10px; font-size: 24px; color: #6C284D; }
    .card__body{ font-size: 18px; line-height: 1.65; font-weight: bolder; white-space: pre-wrap; }
    .is-hidden { display: none !important; }

    /* Fireworks '21' */
    .pop-number{
      position: fixed; left: 0; top: 0; transform: translate(-50%, -50%);
      pointer-events: none; z-index: 9998;
      font-family: 'Dancing Script', cursive; font-weight: 700;
      color: #6C284D;
      text-shadow: 0 .2vh 0 rgba(0,0,0,.25), 0 0 1.2vh rgba(255,181,192,.45);
      animation: float-pop 1.1s ease-out forwards;
      font-size: 7vh; line-height: 1;
    }
    .pop-number.small{ font-size: 3.8vh; opacity:.95; }
    @keyframes float-pop{
      0%   { opacity:0; transform: translate(-50%,-50%) scale(.6); }
      20%  { opacity:1; transform: translate(-50%,-62%) scale(1.22); }
      100% { opacity:0; transform: translate(-50%,-110%) scale(1); }
    }

    /* MOBILE tweaks: move title down a bit more */
    @media (max-width: 480px) {
      .headline { margin-top: 12vh; }
      .presents { height: 46svh; }
      .text { font-size: clamp(2.2rem, 8vw, 3.2rem); }
      .cta-center { top: 36%; font-size: 26px; }
    }
    @media (max-width: 360px) {
      .headline { margin-top: 14vh; }
      .text { font-size: clamp(2rem, 7.5vw, 3rem); }
      .presents { height: 44svh; }
      .cta-center { top: 35%; font-size: 24px; }
    }
    @supports (padding: max(0px)) {
      @media (max-width: 480px) {
        .headline { margin-top: calc(12vh + env(safe-area-inset-top)); }
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Title -->
    <div class="headline">
      <div class="text" data-splitting>Happy Birthday Lama</div>
      <img class="heartImg" src="heart.svg" alt="" aria-hidden="true">
    </div>

    <!-- Presents -->
    <div class="presents">
      <div class="present pink" aria-hidden="true">
        <div class="lid"></div><div class="box"></div><div class="bow"></div><div class="ribbon"></div>
      </div>

      <div class="present yellow" data-card="main" aria-label="Open present">
        <div class="lid"></div><div class="box"></div><div class="bow"></div><div class="ribbon"></div>
        <button class="cta-center" type="button">‚ú®Open me‚ú®</button>
      </div>

      <div class="present purple" aria-hidden="true">
        <div class="lid"></div><div class="box"></div><div class="bow"></div><div class="ribbon"></div>
      </div>
    </div>
  </div>

  <!-- Audio -->
  <audio id="song" src="birthday.mp3" preload="auto" playsinline></audio>
  <button id="start-audio" class="is-hidden">‚ñ∂Ô∏è tap to enable sound</button>

  <!-- Card overlay -->
  <div id="cardOverlay" class="card-overlay is-hidden" role="dialog" aria-modal="true">
    <div class="card">
      <button class="card__close" title="Close">&times;</button>
      <h2 class="card__title" id="cardTitle">HAPPY BIRTHDAY LAMA!üéâ‚ù§Ô∏è</h2>
      <div class="card__body" id="cardBody"></div>
    </div>
  </div>

  <!-- libs -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mo-js/0.288.2/mo.min.js"></script>
  <script src="https://unpkg.com/splitting/dist/splitting.min.js"></script>

  <script>
    /* Audio best-effort autoplay + one-tap fallback */
    (function(){
      const audio = document.getElementById('song');
      const btn   = document.getElementById('start-audio');
      audio.loop = true; audio.volume = 0.9;
      document.addEventListener('DOMContentLoaded', async () => {
        try { await audio.play(); } catch { btn.classList.remove('is-hidden'); }
      });
      async function nudge(){ try { await audio.play(); btn.remove(); kill(); } catch { btn.classList.remove('is-hidden'); } }
      function kill(){ ['pointerdown','keydown','wheel','touchstart'].forEach(ev => window.removeEventListener(ev, nudge, {passive:true})); }
      ['pointerdown','keydown','wheel','touchstart'].forEach(ev => window.addEventListener(ev, nudge, {passive:true, once:true}));
      btn.addEventListener('click', nudge);
    })();

    document.addEventListener('DOMContentLoaded', () => {
      Splitting();

      const overlay   = document.getElementById('cardOverlay');
      const closeBtn  = overlay.querySelector('.card__close');
      const cardTitle = document.getElementById('cardTitle');
      const cardBody  = document.getElementById('cardBody');

      const message = {
        title: "HAPPY BIRTHDAY LAMA!üéâ‚ù§Ô∏è",
        body: `Happy birthday to someone who truly makes the world a brighter place. Your kindness, your creativity, and the way you make every moment feel fun are just a few of the things we love about you.
We‚Äôre so grateful for you, and we probably don‚Äôt say that enough.
We can‚Äôt wait to see all the wonderful things this next year has in store for you. May it be filled with everything that makes you smile, growth that excites you, and dreams that feel a little closer everyday. Here‚Äôs to more of everything we love: the late night laughs, the spontaneous adventure, and the memories we‚Äôll hold onto forever.
Have the most amazing day today and everyday. You absolutely deserve it.
Love you always‚ù§Ô∏è  - Shahad & Alaa`
      };

      // Open card by clicking the center present or its CTA
      const center = document.querySelector('.present.yellow[data-card="main"]');
      const cta = center.querySelector('.cta-center');
      function openCard(e){
        if (e) e.stopPropagation();
        cardTitle.textContent = message.title;
        cardBody.textContent  = message.body;
        overlay.classList.remove('is-hidden');
      }
      center.addEventListener('click', openCard);
      cta.addEventListener('click', openCard);

      // Close the card
      closeBtn.addEventListener('click', () => overlay.classList.add('is-hidden'));
      overlay.addEventListener('click', (e) => {
        if (!e.target.closest('.card')) overlay.classList.add('is-hidden');
      });

      // Fireworks colors: plum -> baby pink
      function bursty(x, y) {
        if (!window.mojs) return;
        new mojs.Burst({
          left: 0, top: 0,
          radius: { 0: 200 }, count: 24, degree: 360,
          children: { fill: { '#6C284D': '#FFB5C0' }, duration: 2000 }
        }).tune({ x, y }).replay();
      }
      function randomizedConfetti(x, y) {
        if (!window.mojs) return;
        new mojs.Burst({
          left: 0, top: 0,
          radius: { 0: 200 }, count: 24, degree: 360,
          children: { fill: { '#6C284D': '#FFB5C0' }, duration: 2000 }
        }).tune({ x, y }).replay();
      }

      // Click fireworks ‚Äî skip if card is open or click inside card
      document.addEventListener("click", (e) => {
        if (!overlay.classList.contains('is-hidden')) return;
        if (e.target.closest('.card')) return;
        bursty(e.pageX, e.pageY);
        showNumber(e.pageX, e.pageY);
      });

      // Random bursts + small "21"
      setInterval(() => {
        if (!overlay.classList.contains('is-hidden')) return;
        const margin = 50;
        const x = Math.floor(Math.random() * (window.innerWidth  - margin * 2)) + margin;
        const y = Math.floor(Math.random() * (window.innerHeight - margin * 2)) + margin;
        randomizedConfetti(x, y);
        showNumber(x, y, true);
      }, 700);

      function showNumber(x, y, small = false) {
        const el = document.createElement('span');
        el.className = 'pop-number' + (small ? ' small' : '');
        el.textContent = '21';
        el.style.left = x + 'px';
        el.style.top  = y + 'px';
        document.body.appendChild(el);
        setTimeout(() => el.remove(), 1200);
      }
    });
  </script>
</body>
</html>
